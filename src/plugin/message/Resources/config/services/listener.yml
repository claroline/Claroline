services:
    _defaults:
        autowire: false
        autoconfigure: false
        public: true

    Claroline\MessageBundle\Listener\Tool\MessagingListener:
        arguments:
            - '@security.token_storage'
            - '@Claroline\MessageBundle\Manager\ContactManager'
        tags:
            - { name: kernel.event_listener, event: open_tool_desktop_messaging, method: onDisplayDesktop }
            - { name: kernel.event_listener, event: desktop.messaging.configure, method: onConfigureDesktop }

    Claroline\MessageBundle\Listener\MessageListener:
        arguments:
            - '@Claroline\MessageBundle\Manager\MessageManager'
            - '@Claroline\CoreBundle\Manager\Task\ScheduledTaskManager'
        tags:
            - { name: kernel.event_listener, event: claroline_message_sending, method: onMessageSending }
            - { name: kernel.event_listener, event: claroline_scheduled_task_execute_message, method: onExecuteMessageTask }
