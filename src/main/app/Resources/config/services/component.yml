# Declares all services required for the management of Claroline Components (eg. tools, resources, widgets).
services:
    # Contexts
    Claroline\AppBundle\Component\Context\ContextProvider:
        lazy: true
        arguments:
            - !tagged_iterator claroline.component.context
            - '@security.token_storage'
            - '@Claroline\AppBundle\Persistence\ObjectManager'
            - '@Claroline\AppBundle\API\SerializerProvider'

    claroline.context_provider:
        alias: Claroline\AppBundle\Component\Context\ContextProvider
        public: true

    Claroline\AppBundle\Component\Context\AbstractContext:
        abstract: true
        calls:
            - method: setToolProvider
              arguments:
                  - '@Claroline\AppBundle\Component\Tool\ToolProvider'

    # Tools
    Claroline\AppBundle\Component\Tool\ToolProvider:
        lazy: true
        arguments:
            - !tagged_iterator claroline.component.tool
            - '@event_dispatcher'
            - '@Claroline\AppBundle\Persistence\ObjectManager'
            - '@Claroline\AppBundle\API\SerializerProvider'
            - '@Claroline\AppBundle\API\Crud'

    claroline.tool_provider:
        alias: Claroline\AppBundle\Component\Tool\ToolProvider
        public: true

    Claroline\AppBundle\Component\Tool\AbstractTool:
        abstract: true

    # DataSources
    Claroline\AppBundle\Component\DataSource\DataSourceProvider:
        lazy: true
        arguments:
            - !tagged_iterator claroline.component.data_source

    claroline.data_source_provider:
        alias: Claroline\AppBundle\Component\DataSource\DataSourceProvider
        public: true

    Claroline\AppBundle\Component\DataSource\AbstractDataSource:
        abstract: true
