<?php

/**
 * The following script makes the app/config_prod.yml use monolog production settings.
 *
 * It is used only by the automated demo job on Jenkins.
 */

require_once __DIR__ . '/../../vendor/autoload.php';

use Symfony\Component\Yaml\Yaml;

$prodConfigFile = __DIR__ . '/../config/config_prod.yml';
$config = Yaml::parse(file_get_contents($prodConfigFile));
$config['monolog'] = array(
    'handlers' => array(
        'main' => array(
            'type' => 'stream',
            'path' => '%kernel.logs_dir%/%kernel.environment%.log',
            'level' => 'debug'
        ),
        'firephp' => array(
            'type' => 'firephp',
            'level' => 'info'
        )
    )
);
file_put_contents($prodConfigFile, Yaml::dump($config, 4));